
현재 테이블의 구조 (post_list)

gid(varchar): PK, FK
postNum(int): PK
identityCode(varchar): FK

gid와 postNum은 복합 기본 키
gid와 identityCode는 각각 외래키 제약을 가지고 있음


문제점: 인덱스 미비

```SQL
SELECT postNum FROM post_list
    WHERE identityCode = ? AND galleryCODE = ?
    ORDER BY postNum ASC
    FOR UPDATE;
```
위와 같은 쿼리가 있다고 하자.

WHERE 절에서 identityCode 와 galleryCODE를 조건으로 사용하는데

해당 그룹을 만족하는 인덱스가 존재하지 않는다.

여기서, 인덱스를 사용하지 못하는 컬럼에 대해서 `풀 스캔`을 진행하게 되면 모든 행에 잠금이 걸릴 수 있다.

따라서 불필요한 잠금이 발생하게 되고 이는 데드락을 높일 수 있는 경우가 된다.









